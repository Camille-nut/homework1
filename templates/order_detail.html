<!-- order_detail.html -->
{% extends 'nav.html' %}
{% load static %}
{% block content %}
    <div class="container mt-4">
        <div class="card shadow">
            <h2 class="item_title">订单详情</h2>
            <div class="mb-3">
                <label>订单号：</label>
                <span>{{ order.transaction_id }}</span>
            </div>
            <div class="mb-3">
                <label>日期：</label>
                <span>{{ order.date_ordered }}</span>
            </div>
            <div class="mb-3">
                <label>总价：</label>
                <span>￥{{ order.get_total_cost }}</span>
            </div>
            <div class="mb-3">
                <label>状态：</label>
                <span>{% if order.complete %}已完成{% else %}未完成{% endif %}</span>
            </div>
            <h3 class="item_title">订单项</h3>
            <table class="table table-bordered table-hover">
                <thead>
                <tr>
                    <th>商品名称</th>
                    <th>商品封面</th>
                    <th>数量</th>
                    <th>单价</th>
                    <th>小计</th>
                </tr>
                </thead>
                <tbody>
                {% for item in order.orderitem.all %}
                    <tr>
                        <td>{{ item.product.name }}</td>
                         <td class="image-container"><img src="{{ item.product.image.url }}" class="img-fluid"></td>
                        <td>{{ item.quantity }}</td>
                        <td>￥{{ item.product.price }}</td>
                        <td>￥{{ item.get_total_price }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

    </div>
{% endblock %}